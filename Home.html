<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="style/styleloginandregister.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>

<body>


    <div class="topnav">
        <a href="Home.html" style="color: white;"><img width="30px" height="5%" src="img/logo.jpg" class="img">Home</a>
        <a href="Profile.HTML"> <i class="fas fa-shopping-basket" id="CardshipTap" >Card</i></a>
        <a href="#contact"></a>
        <div class="topnav-right" id="loginNotExist" style="display: block;">
            <button type="button"  class="btn btn-dark" onclick="location.href='Login.html'">Sign in</a>
            <button type="button"  class="btn btn-dark"  id="create-user">Sign Up</button>
        </div>
        <div class="topnav-right" id="loginExist" style="display: none;">
            <button onclick="location.href='Profile.html'" class="btn btn-dark" id="UserName"
                style="color: white;"></button>

            <button type="button" id="Out" class="btn btn-dark">Sign Out</button>
        </div>
        <div style="margin-top: 10px;margin-right: 10px;margin-left: 0%;">
            <form action="Search.html">
                <input type="text" placeholder="Search.." name="search" id="autocomplete">
                <button id="btnSearch" type="submit"><i class="fa fa-search"></i></button>
            </form>
        </div>

    </div>


    <div id="dialog-form" title="Register">
        <p class="validateTips">All form fields are required.</p>

            <form id="Frm1" name="Frm1" class="container card p-3">
 <fieldset>
        
                <input type="text" width="100%" name="fName" id="fName" placeholder="Frist Name" pattern="[A-Z a-z]{3,}"
                    required>
        
                <input type="text"  name="sName" id="sName" placeholder="Second Name" pattern="[A-Z a-z]{3,}"
                    required>
        
                <input type="email" name="mail" id="mail" placeholder="Email Address"
                    pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required>
        
                <input type="password"  name="psd" id="psd" placeholder="Password"
                    pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required>
              
               
     </fieldset>        
            </form>
     
       
      </div>
    
      
      
    <script>

        function addUser() {

            console.log("add user function");
            console.log($("#user").val());
            $("#showName").text("welcome ")

            dialog.dialog("close");

        }

        dialog = $("#dialog-form").dialog({
            autoOpen: false,
            modal: true,
            height: 400,
            width: 350,
            buttons: {
                Register: function () {
                    console.log("add user function");
                    if ($("#mail").val() == "" || $("#psd").val() == "" || $("#sName").val() == "" || $("#fName").val() == "") {
                        alert("Plz,Entre Full Data")
                    }else{
                        var objNewUser={"id":7,"email":$("#mail").val() ,"first_name":$("#fName").val() ,"last_name":$("#sName").val(),"Pass":$("#psd").val()}
                        
                        localStorage.setItem('objNewUser', JSON.stringify(objNewUser));
                        alert("User Added");
                        localStorage.setItem("LoginID",7)

                    }                
                },
               
            },

        });

        $("#create-user").button()
            .on("click", function () {
                dialog.dialog("open");
            });

            $('#create-user').on('dialogclose', function(event) {
     alert('closed');
 });
    </script>
    <script>
        
        var LoginORNot = localStorage.getItem("LoginID")
        if (LoginORNot > 0) {
            document.getElementById("loginNotExist").style.display = "none";
            document.getElementById("loginExist").style.display = "block";
            
            $(document).ready(function () {
                $("#Out").click(function () {

                    localStorage.setItem("LoginID", 0);
                    location.href = "Home.html"
                })
                if(LoginORNot!=7){
                $.ajax({
                    url: 'users.json',
                    dataType: 'json',
                    contentType: 'json',
                    type: 'get',

                    success: function (res) {

                        var len = res.data.length;
                        var flag = 0;

                        for (var index = 0; index < len && flag == 0; index++) {
                            if (LoginORNot == res.data[index].id) {

                                $("#UserName").text(res.data[index].first_name);
                            }
                        }

                    },
                    error: function (xhr) {
                        console.log(xhr)
                        console.log(xhr.status + xhr.statusText)
                    },


                });
 }
 else{
     var NewUserValue=JSON.parse(localStorage.getItem("objNewUser"))
     console.log(NewUserValue.first_name)
    $("#UserName").text(NewUserValue.first_name);
 }
            });
       

        } else {
            document.getElementById("loginNotExist").style.display = "block";
            document.getElementById("loginExist").style.display = "none";
        }
        




    </script>
    <!--Top Prodcts-->
    <div id="ToggleSlider">
        <h1>Top Prodcts</h1>
    </div>
    <div id="Slider">
        <div id="demo" class="carousel slide" data-ride="carousel">

            <!-- Indicators -->
            <ul class="carousel-indicators" id="TopUl">
                <li data-target="#demo" data-slide-to="0" class="active"></li>

            </ul>

            <!-- The slideshow -->
            <div class="carousel-inner" id="TopProducts">
                <div class="carousel-item active ">
                    <img src="" id="ProdctsImgs" width="1100" height="500" class="ImgCenter">
                    <div class="carousel-caption">
                        <p id="PrdName"></p>
                    </div>
                </div>

            </div>

            <!-- Left and right controls -->
            <a class="carousel-control-prev" href="#demo" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#demo" data-slide="next">
                <span class="carousel-control-next-icon"></span>
            </a>
        </div>
    </div>

    <script>
        $(document).ready(function () {


            $("body").css("background", "#e4eded");
            $("#Slider").css("border", "3px solid black")
            $("#ToggleSlider").click(function () {
                $("#Slider").toggle("slow");
            });
            $.ajax({
                url: 'Products.json',
                dataType: 'json',
                contentType: 'json',
                type: 'get',

                success: function (res) {
                    var len = res.TopProducts.length;

                    $("#ProdctsImgs").attr("src", res.TopProducts[0].img);
                    $("#PrdName").text(res.TopProducts[0].Name);

                    for (var index = 1; index < len - 1; index++) {
                        var PrdName = "PrdName" + index;
                        var ProdctsImgs = "ProdctsImgs" + index;

                        $('<div class="carousel-item"><img src="" id=ProdctsImgsX class="ImgCenter"  width="1100" height="500"><div class="carousel-caption"><p id=PrdNameX></p></div></div>').appendTo("#TopProducts");

                        $("#ProdctsImgsX").attr("id", ProdctsImgs);
                        $("#PrdNameX").attr("id", PrdName);

                        $("#" + ProdctsImgs).attr("src", res.TopProducts[index].img);
                        $("#" + PrdName).text(res.TopProducts[index].Name);

                        $('<li data-target="#demo" id="LiX" ></li>').appendTo("#TopUl");
                        $("#LiX").attr("id", "Li" + index);
                        $("#Li" + index).attr("data-slide-to", index);

                    }

                },
                error: function (xhr) {
                    console.log(xhr)
                    console.log(xhr.status + xhr.statusText)
                },



            });



        });

    </script>
    <!--Top sales-->
    <h1 style="margin-top: 10px;" id="TopSales">Top Products On Sale</h1>
    <div class="my-3" id="grids">

        <div class="row" style="margin-left: 0%; margin-right: 0%;flex-direction: row;">

            <div class="col-1"></div>
            <div class="col-5 my-1 ">
                <h2 class="my-1" id="lapHead">Laptops</h2>
                <div id="divLaptops">

                </div>
            </div>


            <div class="col-1"></div>
            <div class="col-5 my-1">
                <h2 class="my-1" id="PhoneHead">Mobile Phone</h2>
                <div id="MobilePhone"></div>

            </div>

        </div>
        <div class="row" style="margin-left: 0%; margin-right: 0%;flex-direction: row;">

            <div class="col-1"></div>
            <div class="col-5 my-1">
                <h2 id="WatchHead">Watches</h2>
                <div id="Watches"></div>
            </div>
            <div class="col-1"></div>
            <div class="col-5 my-1">
                <h2 id="TvHead">Televisions</h2>
                <div id="Others"></div>

            </div>
        </div>



    </div>


    <script>
        $(document).ready(function () {

            $("#TopSales").click(function () {
                $("#grids").toggle("slow");
            });

            $.ajax({
                url: 'Products.json',
                dataType: 'json',
                contentType: 'json',
                type: 'get',

                success: function (res) {
                    $("#lapHead").click(function () {
                        $("#MobilePhone").fadeToggle("slow");
                        $("#divLaptops").fadeToggle("slow");
                    });
                    $("#WatchHead").click(function () {
                        $("#Watches").fadeToggle("slow");
                        $("#Others").fadeToggle("slow");
                    });
                    var len = res.Products.length;

                    var lapCount = 0, MobilCount = 0, watchCount = 0, Other = 0;
                    for (var index = 0; index < len; index++) {

                        var totalPrice = (parseInt(res.Products[index].Price) - ((parseInt(res.Products[index].Price) * parseInt(res.Products[index].sale)) / 100))

                        if (res.Products[index].category == "laptops" && parseInt(res.Products[index].sale) >= 15) {

                            lapCount = lapCount + 1;
                            $("#divLaptops").append("<div id='main'><div class='ProductContainer'><img src='' style='width:300px;' id='idImgX'><h5 class='CentereName'id='idPriceX' ></h5></div><h5 id='idNameX' class='my-3' ></h5></div>");

                            $("#idImgX").attr("id", "idImg" + lapCount);
                            $("#idNameX").attr("id", "idName" + lapCount);
                            $("#idPriceX").attr("id", "idPrice" + lapCount);
                            $("#main").attr("id", "mainL" + lapCount);

                            $("#idImg" + lapCount).attr("src", res.Products[index].img);
                            $("#idName" + lapCount).text(res.Products[index].Name);
                            $("#idPrice" + lapCount).text(totalPrice);
                            $('#mainL' + lapCount).addClass('container card');
                            $('#mainL' + lapCount).css({ 'max-width': 'max-content', 'margin': '10px', 'padding': '10px', 'text-align': 'center' })


                            $("#idImg" + lapCount).on("click", function () {

                                var srcValue = $(this).attr('src');
                                for (var indexImg = 0; indexImg < len; indexImg++) {
                                    if (srcValue == res.Products[indexImg].img) {
                                        localStorage.setItem("ProductID", parseInt(res.Products[indexImg].id));
                                        location.href = "Products.html";
                                    }
                                }
                            });
                            if (parseInt(res.Products[index].Quantity) < 10) {
                                console.log(parseInt(res.Products[index].Quantity));
                                $('#mainL' + lapCount).addClass('polaroid rotate_right');
                            }

                        }
                        if (res.Products[index].category == "Watches" && parseInt(res.Products[index].sale) >= 11) {

                            watchCount = watchCount + 1;
                            $("#Watches").append("<div id='main'><div class='ProductContainer'><img src='' style='width:300px;' id='idImgWX'><h5 class='CentereName'id='idPriceWX' ></h5></div><h5 id='idNameWX'  ></h5></div>");

                            $("#idImgWX").attr("id", "idImgW" + watchCount);
                            $("#idNameWX").attr("id", "idNameW" + watchCount);
                            $("#idPriceWX").attr("id", "idPriceW" + watchCount);
                            $("#main").attr("id", "mainW" + watchCount);

                            $("#idImgW" + watchCount).attr("src", res.Products[index].img);
                            $("#idNameW" + watchCount).text(res.Products[index].Name);
                            $("#idPriceW" + watchCount).text(totalPrice);
                            $('#mainW' + watchCount).addClass('container card');
                            $('#mainW' + watchCount).css({ 'max-width': 'max-content', 'margin': '10px', 'padding': '10px', 'text-align': 'center' })


                            $("#idImgW" + watchCount).on("click", function () {

                                var srcValue = $(this).attr('src');
                                for (var indexImg = 0; indexImg < len; indexImg++) {
                                    if (srcValue == res.Products[indexImg].img) {
                                        localStorage.setItem("ProductID", parseInt(res.Products[indexImg].id));
                                        location.href = "Products.html";
                                    }
                                }
                            });

                            if (parseInt(res.Products[index].Quantity) < 10) {
                                console.log(parseInt(res.Products[index].Quantity));
                                $('#mainW' + watchCount).addClass('polaroid rotate_right');
                            }
                        }

                        if (res.Products[index].category == "TV" && parseInt(res.Products[index].sale) > 15) {
                            console.log("Here")
                            Other = Other + 1;
                            $("#Others").append("<div id='main' ><div class='ProductContainer'><img src='' style='width:300px;' id='idImgHX'><h5 class='CentereName'id='idPriceHX' ></h5></div><h5 id='idNameHX'  ></h5></div>");

                            $("#idImgHX").attr("id", "idImgH" + Other);
                            $("#idNameHX").attr("id", "idNameH" + Other);
                            $("#idPriceHX").attr("id", "idPriceH" + Other);
                            $("#main").attr("id", "mainH" + Other);


                            $("#idImgH" + Other).attr("src", res.Products[index].img);
                            $("#idNameH" + Other).text(res.Products[index].Name);
                            $("#idPriceH" + Other).text(totalPrice);

                            $('#mainH' + Other).addClass('container card');
                            $('#mainH' + Other).css({ 'max-width': 'max-content', 'margin': '10px', 'padding': '10px', 'text-align': 'center' })



                            $("#idImgH" + Other).on("click", function () {

                                var srcValue = $(this).attr('src');
                                for (var indexImg = 0; indexImg < len; indexImg++) {
                                    if (srcValue == res.Products[indexImg].img) {
                                        localStorage.setItem("ProductID", parseInt(res.Products[indexImg].id));
                                        location.href = "Products.html";
                                    }
                                }
                            });

                            if (parseInt(res.Products[index].Quantity) < 10) {
                                console.log(parseInt(res.Products[index].Quantity));
                                $('#mainH' + Other).addClass('polaroid rotate_right');
                            }
                        }
                        if (res.Products[index].category == "MobilePhone" && parseInt(res.Products[index].sale) < 8) {
                            console.log("MobilCount")
                            MobilCount = MobilCount + 1;
                            $("#MobilePhone").append("<div id='main' ><div class='ProductContainer'><img src='' style='width:280px;' id='idImgXM'><h5 class='CentereName'id='idPriceXM' ></h5></div><h5 id='idNameXM'  ></h5></div>");

                            $("#idImgXM").attr("id", "idImgM" + MobilCount);
                            $("#idNameXM").attr("id", "idNameM" + MobilCount);
                            $("#idPriceXM").attr("id", "idPriceM" + MobilCount);
                            $("#main").attr("id", "mainM" + MobilCount);


                            $("#idImgM" + MobilCount).attr("src", res.Products[index].img);
                            $("#idNameM" + MobilCount).text(res.Products[index].Name);
                            $("#idPriceM" + MobilCount).text(totalPrice);
                            $('#mainM' + MobilCount).addClass('container card');
                            $('#mainM' + MobilCount).css({ 'max-width': 'max-content', 'margin': '10px', 'padding': '10px', 'text-align': 'center' })

                            $("#idImgM" + MobilCount).on("click", function () {

                                var srcValue = $(this).attr('src');
                                for (var indexImg = 0; indexImg < len; indexImg++) {
                                    if (srcValue == res.Products[indexImg].img) {
                                        localStorage.setItem("ProductID", parseInt(res.Products[indexImg].id));
                                        location.href = "Products.html";
                                    }
                                }
                            });

                            if (parseInt(res.Products[index].Quantity) < 10) {
                                console.log(parseInt(res.Products[index].Quantity));
                                $('#mainM' + MobilCount).toggleClass('polaroid rotate_right');
                            }
                        }
                    }

                },
                error: function (xhr) {
                    console.log(xhr)
                    console.log(xhr.status + xhr.statusText)
                },



            });

            $("#autocomplete").autocomplete({
                source: ["TV", "Laptops", "Watches", "Phone", "MobilePhone", "Heater", "Kittle", "VR", "Printer"]
            });
            $("#btnSearch").click(function(){
                var SearchVal=$("#autocomplete").val();
                localStorage.setItem("SearchVal",SearchVal);
            });
        });

    </script>
<footer class="container-fluid  p-3" style="background-color: black;">

</footer>
</body>

</html>